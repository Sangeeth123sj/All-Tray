<!DOCTYPE html>
{% extends "tray/college_homepage_layout.html" %}





{% block title%} Subscription Checkout  {% endblock %}


{% block content %}
<center>
    <h2>Subscription Checkout</h2>
    <button id = "rzp-button1" class="btn btn-success">Pay</button>
    <script src = "https://checkout.razorpay.com/v1/checkout.js"></script>

<script>
    var options = {
        "key": "{{key_id}}",
        "subscription_id": "{{subscription_id}}",
        "name": "ALLTRAY",
        "description": "Monthly Basic Plan",
        "image": "/your_logo.jpg",
        /*"handler": function(response) {
          alert(response.razorpay_payment_id),
          alert(response.razorpay_subscription_id),
          alert(response.razorpay_signature);
          generated_signature = hmac_sha256(response.razorpay_payment_id + "|" + "{{subscription_id}}", "{{key_secret}}");

          if (generated_signature == response.razorpay_signature) {
            alert("payment is successful")
          }
          if (generated_signature == response.razorpay_signature){
            Swal.fire(
              'Subscription Successful!',
              '<p><p>',
              'success'
              ).then(function() {
                window.location.href = "/college_home";
            });
          }
          else{
            Swal.fire(
              'Subscription Failure!',
              '<p>please contact alltray<p>',
              'success'
              ).then(function() {
                window.location.href = "/college_home";
            });
          }
        },*/
        "callback_url": "{{callback_url}}/{{institute.identification_token}}/{{subscription_id}}/",
        "prefill": {
          "name": "{{institute.user.name}}",
          "email": "{{institute.user.email}}",
          "contact": "",
        },
        "notes": {
          //"note_key_1": "Tea. Earl Grey. Hot",
          //"note_key_2": "Make it so."
        },
        "theme": {
          "color": "rgba(58,175,160,1)"
        }
      };
    var rzp1 = new Razorpay(options);
    //document.getElementById('rzp-button1').onclick = function(e) {
      rzp1.open();
      //e.preventDefault();
    //}

  //}); 
</script>
</center>
{% endblock %}

{% block footer %}
{% endblock %}